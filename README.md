# Prefrontal Cortex Chatter (PFC)

åŸºäºå‰é¢å¶çš®å±‚æ¦‚å¿µçš„ç›®æ ‡é©±åŠ¨å¼æ™ºèƒ½ç§èŠç³»ç»Ÿã€‚

## ğŸ“‹ ç‰ˆæƒå£°æ˜

æœ¬æ’ä»¶ç§»æ¤è‡ª **MaiM-with-u** é¡¹ç›®çš„ PFC ç§èŠç³»ç»Ÿ (v0.6.3-fix4)ã€‚

åŸå§‹é¡¹ç›®ï¼š[MaiM-with-u/MaiBot](https://github.com/MaiM-with-u/MaiBot) | è®¸å¯è¯ï¼šGPL-3.0 | ç§»æ¤è€…ï¼š[ASUSwei114](https://github.com/ASUSwei114)

## âœ¨ ä¸»è¦ç‰¹æ€§

- ğŸ¯ **ç›®æ ‡é©±åŠ¨å¯¹è¯** - è‡ªåŠ¨è®¾å®šå’Œè°ƒæ•´å¯¹è¯ç›®æ ‡
- ğŸ”„ **æŒç»­å¾ªç¯ç³»ç»Ÿ** - åå°è¿è¡Œï¼Œå®æ—¶å“åº”
- ğŸ§  **çŸ¥è¯†é›†æˆ** - æ•´åˆè®°å¿†ã€çŸ¥è¯†åº“å’Œè”ç½‘æœç´¢
- âœ… **å›å¤è´¨é‡æ£€æŸ¥** - LLM æ·±åº¦æ£€æŸ¥å’Œç›¸ä¼¼åº¦æ£€æµ‹
- ğŸ› ï¸ **å·¥å…·è°ƒç”¨æ”¯æŒ** - é›†æˆ MoFox å·¥å…·ç³»ç»Ÿ
- ğŸ’¾ **æ•°æ®åº“å­˜å‚¨** - æ”¯æŒ SQLite/PostgreSQL

## ğŸš€ å¿«é€Ÿå¼€å§‹

1. å°†æ’ä»¶æ”¾ç½®åˆ° `plugins/` ç›®å½•
2. å…³é—­å¿ƒæµèŠå¤©å™¨ï¼šåœ¨ `config/bot_config.toml` è®¾ç½® `[kokoro_flow_chatter] enabled = false`
3. é‡å¯ Bot

## âš™ï¸ é…ç½®è¯´æ˜

é…ç½®æ–‡ä»¶ï¼š`config/plugins/prefrontal_cortex_chatter/config.toml`

### ä¸»è¦é…ç½®é¡¹

```toml
[plugin]
enabled = true                    # å¯ç”¨æ’ä»¶

[waiting]
wait_timeout_seconds = 300        # ç­‰å¾…è¶…æ—¶ï¼ˆç§’ï¼‰
enable_block_action = true        # æ˜¯å¦å¯ç”¨å±è”½åŠŸèƒ½

[session]
max_history_entries = 100         # æœ€å¤§å†å²è®°å½•æ•°
initial_history_limit = 30        # åˆå§‹åŠ è½½å†å²æ•°

[reply_checker]
enabled = true                    # å¯ç”¨å›å¤æ£€æŸ¥
use_llm_check = true             # ä½¿ç”¨ LLM æ·±åº¦æ£€æŸ¥
similarity_threshold = 0.9        # ç›¸ä¼¼åº¦é˜ˆå€¼

[web_search]
enabled = true                    # å¯ç”¨è”ç½‘æœç´¢ï¼ˆéœ€ WEB_SEARCH_TOOL æ’ä»¶ï¼‰
num_results = 3                   # æœç´¢ç»“æœæ•°é‡

[tool]
enabled = true                    # å¯ç”¨å·¥å…·è°ƒç”¨
```

å®Œæ•´é…ç½®è¯´æ˜è§é…ç½®æ–‡ä»¶æ³¨é‡Šã€‚

## ğŸ¬ è¡ŒåŠ¨ç±»å‹

| è¡ŒåŠ¨ | è¯´æ˜ |
|-----|------|
| `direct_reply` | ç›´æ¥å›å¤å¯¹æ–¹ |
| `send_new_message` | ç»§ç»­å¯¹è¯ï¼ˆè¿½é—®/è¡¥å……ï¼‰ |
| `wait` | ç­‰å¾…å¯¹æ–¹å›å¤ |
| `listening` | å€¾å¬ï¼ˆå¯¹æ–¹è¯æ²¡è¯´å®Œï¼‰ |
| `fetch_knowledge` | è·å–çŸ¥è¯†/è®°å¿† |
| `use_tool` | ä½¿ç”¨å·¥å…·ï¼ˆæœç´¢/æŸ¥è¯¢ï¼‰ |
| `rethink_goal` | é‡æ–°æ€è€ƒç›®æ ‡ |
| `end_conversation` | ç»“æŸå¯¹è¯ |
| `say_goodbye` | å‘é€å‘Šåˆ«è¯­ |
| `block_and_ignore` | å±è”½å¯¹æ–¹ |

## ğŸ“ æ¨¡å—ç»“æ„

```
prefrontal_cortex_chatter/
â”œâ”€â”€ __init__.py              # æ¨¡å—åˆå§‹åŒ–ï¼ˆå»¶è¿ŸåŠ è½½ï¼‰
â”œâ”€â”€ plugin.py                # æ’ä»¶æ³¨å†Œä¸é…ç½®ç®¡ç†
â”œâ”€â”€ chatter.py               # Chatter ä¸»ç±»ï¼Œå¤„ç†æ¶ˆæ¯å…¥å£
â”œâ”€â”€ session.py               # ä¼šè¯ç®¡ç†å™¨ï¼Œæ”¯æŒæŒä¹…åŒ–å­˜å‚¨
â”œâ”€â”€ conversation_loop.py     # å¯¹è¯å¾ªç¯ï¼ŒæŒç»­è¿è¡Œçš„åå°ä»»åŠ¡
â”œâ”€â”€ planner.py               # è¡ŒåŠ¨è§„åˆ’å™¨ï¼Œå†³ç­–ä¸‹ä¸€æ­¥è¡ŒåŠ¨
â”œâ”€â”€ replyer.py               # å›å¤ç”Ÿæˆå™¨ä¸è´¨é‡æ£€æŸ¥å™¨
â”œâ”€â”€ goal_analyzer.py         # å¯¹è¯ç›®æ ‡åˆ†æå™¨
â”œâ”€â”€ knowledge_fetcher.py     # çŸ¥è¯†è·å–å™¨ï¼ˆè®°å¿†/çŸ¥è¯†åº“/æœç´¢ï¼‰
â”œâ”€â”€ context_builder.py       # ä¸Šä¸‹æ–‡æ„å»ºå™¨ï¼ˆè®°å¿†/å·¥å…·/è¡¨è¾¾ä¹ æƒ¯ç­‰ï¼‰
â”œâ”€â”€ models.py                # æ•°æ®æ¨¡å‹å®šä¹‰
â”œâ”€â”€ shared.py                # å…±äº«å·¥å…·å‡½æ•°
â”œâ”€â”€ db_models.py             # æ•°æ®åº“æ¨¡å‹å®šä¹‰
â”œâ”€â”€ db_storage.py            # æ•°æ®åº“å­˜å‚¨åç«¯
â””â”€â”€ actions/                 # è¡ŒåŠ¨ç»„ä»¶
    â””â”€â”€ reply.py             # PFC ä¸“å±å›å¤åŠ¨ä½œ
```

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **å¿…é¡»å…³é—­å¿ƒæµèŠå¤©å™¨**ï¼šåœ¨ `config/bot_config.toml` è®¾ç½® `[kokoro_flow_chatter] enabled = false`
2. **æ•°æ®åº“å­˜å‚¨**ï¼šä½¿ç”¨ SQLite/PostgreSQL å­˜å‚¨ä¼šè¯ï¼Œè‡ªåŠ¨åˆ›å»ºè¡¨ç»“æ„
3. **è”ç½‘æœç´¢**ï¼šéœ€è¦ `WEB_SEARCH_TOOL` æ’ä»¶æ”¯æŒ
4. **LLM æ¨¡å‹**ï¼šä¼˜å…ˆä½¿ç”¨ `planner` æ¨¡å‹ï¼Œæœªé…ç½®æ—¶å›é€€åˆ° `normal` æ¨¡å‹

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®éµå¾ª **GNU General Public License v3.0** è®¸å¯è¯ã€‚è¯¦è§ [LICENSE](LICENSE)ã€‚