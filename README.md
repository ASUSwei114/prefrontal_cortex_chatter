# Prefrontal Cortex Chatter (PFC)

åŸºäºå‰é¢å¶çš®å±‚æ¦‚å¿µçš„æ™ºèƒ½ç§èŠç³»ç»Ÿï¼Œæ”¯æŒç›®æ ‡å¯¼å‘å¯¹è¯ã€çŸ¥è¯†è·å–ç­‰åŠŸèƒ½ã€‚

## ğŸ“‹ ç‰ˆæƒå£°æ˜

æœ¬æ’ä»¶ç§»æ¤è‡ª **MaiM-with-u** é¡¹ç›®çš„ PFC ç§èŠç³»ç»Ÿã€‚

| é¡¹ç›® | ä¿¡æ¯ |
|------|------|
| **åŸå§‹é¡¹ç›®** | [MaiM-with-u/MaiBot](https://github.com/MaiM-with-u/MaiBot/releases/tag/0.6.3-fix4-alpha) |
| **åŸå§‹ç‰ˆæœ¬** | 0.6.3-fix4 |
| **åŸå§‹ä»£ç è·¯å¾„** | `src/plugins/PFC/` |
| **åŸå§‹è®¸å¯è¯** | GNU General Public License v3.0 |
| **ç§»æ¤æ—¥æœŸ** | 2024å¹´12æœˆ |
| **ç§»æ¤è€…** | [ASUSwei114](https://github.com/ASUSwei114) |

## ğŸ”§ ä¸»è¦ä¿®æ”¹å†…å®¹

ç›¸æ¯”åŸç‰ˆ PFCï¼Œæœ¬ç§»æ¤ç‰ˆæœ¬è¿›è¡Œäº†ä»¥ä¸‹ä¿®æ”¹ï¼š

### æ¶æ„é€‚é…
- é€‚é… MoFox_Bot çš„æ’ä»¶ç³»ç»Ÿæ¶æ„
- é‡æ„ä¸ºç‹¬ç«‹æ’ä»¶æ¨¡å—ï¼Œæ”¯æŒçƒ­æ’æ‹”
- ä½¿ç”¨ MoFox_Bot çš„é…ç½®ç³»ç»Ÿå’Œæ—¥å¿—ç³»ç»Ÿ

### åŠŸèƒ½é‡æ„
- é‡æ„æ¶ˆæ¯å¤„ç†å’Œå›å¤ç”Ÿæˆé€»è¾‘
- é‡æ„ä¼šè¯ç®¡ç†å™¨ (SessionManager)
- é‡æ„å¯¹è¯å¾ªç¯ (ConversationLoop)

### æ–°å¢åŠŸèƒ½
- æ·»åŠ  PFC ä¸“å± Reply åŠ¨ä½œ
- æ”¯æŒå¤šè¡Œå›å¤æ‹†åˆ†å‘é€

### Bug ä¿®å¤
- ä¿®å¤èŠå¤©å†å²æ„å»ºé—®é¢˜
- ä¿®å¤äººæ ¼è·å–é€»è¾‘
- ä¿®å¤å¯¹è¯å¾ªç¯ç»“æŸåæ–°æ¶ˆæ¯æ— æ³•è§¦å‘æ–°å¾ªç¯çš„é—®é¢˜
- æ¢å¤åŸç‰ˆ Prompt æ¨¡æ¿çš„"ç®€çŸ­20å­—ä»¥å†…"çº¦æŸ

### å¯é…ç½®åŠŸèƒ½
- æ·»åŠ å¯é…ç½®çš„å›å¤æ£€æŸ¥å™¨ï¼ˆæ”¯æŒå¯ç”¨/ç¦ç”¨ LLM æ£€æŸ¥ï¼‰

## âœ¨ åŠŸèƒ½ç‰¹æ€§

- ğŸ¯ **ç›®æ ‡é©±åŠ¨å¯¹è¯** - åŸºäºå¯¹è¯ç›®æ ‡è¿›è¡Œæ™ºèƒ½è§„åˆ’
- ğŸ§  **å¤šç§è¡ŒåŠ¨ç±»å‹** - æ”¯æŒå›å¤ã€ç­‰å¾…ã€å€¾å¬ã€è·å–çŸ¥è¯†ç­‰
- âœ… **å›å¤è´¨é‡æ£€æŸ¥** - å¯é…ç½®çš„å›å¤è´¨é‡æ£€æŸ¥ï¼Œæ”¯æŒ LLM æ·±åº¦æ£€æŸ¥
- ğŸ“š **çŸ¥è¯†è·å–** - æ”¯æŒä»å¤–éƒ¨è·å–çŸ¥è¯†è¾…åŠ©å›å¤

## ğŸ“ æ–‡ä»¶ç»“æ„

```
prefrontal_cortex_chatter/
â”œâ”€â”€ __init__.py          # æ¨¡å—å…¥å£å’Œå¯¼å‡º
â”œâ”€â”€ plugin.py            # æ’ä»¶æ³¨å†Œ
â”œâ”€â”€ chatter.py           # èŠå¤©å™¨ä¸»ç±»
â”œâ”€â”€ planner.py           # è¡ŒåŠ¨è§„åˆ’å™¨
â”œâ”€â”€ replyer.py           # å›å¤ç”Ÿæˆå™¨
â”œâ”€â”€ goal_analyzer.py     # ç›®æ ‡åˆ†æå™¨
â”œâ”€â”€ waiter.py            # ç­‰å¾…å™¨
â”œâ”€â”€ knowledge_fetcher.py # çŸ¥è¯†è·å–å™¨
â”œâ”€â”€ session.py           # ä¼šè¯ç®¡ç†å™¨
â”œâ”€â”€ conversation_loop.py # å¯¹è¯å¾ªç¯
â”œâ”€â”€ models.py            # æ•°æ®æ¨¡å‹
â”œâ”€â”€ config.py            # é…ç½®ç®¡ç†
â”œâ”€â”€ utils.py             # å·¥å…·å‡½æ•°
â”œâ”€â”€ manifest.toml        # æ’ä»¶æ¸…å•
â”œâ”€â”€ LICENSE              # GPL-3.0 è®¸å¯è¯
â”œâ”€â”€ README.md            # æœ¬æ–‡ä»¶
â””â”€â”€ actions/
    â”œâ”€â”€ __init__.py
    â””â”€â”€ reply.py         # PFC ä¸“å±å›å¤åŠ¨ä½œ
```

## âš™ï¸ é…ç½®è¯´æ˜

åœ¨ `config/plugins/prefrontal_cortex_chatter/config.toml` ä¸­é…ç½®ï¼š

```toml
[prefrontal_cortex_chatter]
enabled = true

[prefrontal_cortex_chatter.waiting]
default_max_wait_seconds = 300  # é»˜è®¤ç­‰å¾…è¶…æ—¶æ—¶é—´(ç§’)
min_wait_seconds = 30           # æœ€çŸ­ç­‰å¾…æ—¶é—´
max_wait_seconds = 1800         # æœ€é•¿ç­‰å¾…æ—¶é—´(30åˆ†é’Ÿ)

[prefrontal_cortex_chatter.session]
session_dir = "prefrontal_cortex_chatter/sessions"
session_expire_seconds = 604800  # ä¼šè¯è¿‡æœŸæ—¶é—´(7å¤©)
max_history_entries = 100        # æœ€å¤§å†å²è®°å½•æ¡æ•°

[prefrontal_cortex_chatter.reply_checker]
enabled = true              # æ˜¯å¦å¯ç”¨å›å¤æ£€æŸ¥å™¨
use_llm_check = true        # æ˜¯å¦ä½¿ç”¨ LLM è¿›è¡Œæ·±åº¦æ£€æŸ¥
similarity_threshold = 0.9  # ç›¸ä¼¼åº¦é˜ˆå€¼(0-1)ï¼Œè¶…è¿‡æ­¤å€¼åˆ¤å®šä¸ºé‡å¤
max_retries = 3             # æœ€å¤§é‡è¯•æ¬¡æ•°
```

### å›å¤æ£€æŸ¥å™¨é…ç½®è¯´æ˜

| é…ç½®é¡¹ | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|--------|------|
| `enabled` | `true` | æ˜¯å¦å¯ç”¨å›å¤æ£€æŸ¥å™¨ã€‚è®¾ä¸º `false` åˆ™è·³è¿‡æ‰€æœ‰æ£€æŸ¥ |
| `use_llm_check` | `true` | æ˜¯å¦ä½¿ç”¨ LLM è¿›è¡Œæ·±åº¦æ£€æŸ¥ã€‚è®¾ä¸º `false` åªåšåŸºæœ¬æ£€æŸ¥ï¼ˆç©ºå›å¤ã€è¿‡é•¿ã€ç›¸ä¼¼åº¦ï¼‰ |
| `similarity_threshold` | `0.9` | ç›¸ä¼¼åº¦é˜ˆå€¼ï¼Œè¶…è¿‡æ­¤å€¼åˆ¤å®šä¸ºä¸ä¸Šä¸€æ¡å›å¤é‡å¤ |
| `max_retries` | `3` | å›å¤ç”Ÿæˆçš„æœ€å¤§é‡è¯•æ¬¡æ•° |

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®ç»§ç»­éµå¾ª **GNU General Public License v3.0** è®¸å¯è¯ã€‚

è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

## ğŸ™ è‡´è°¢

æ„Ÿè°¢ [MaiM-with-u](https://github.com/MaiM-with-u/MaiBot) å›¢é˜Ÿå¼€å‘çš„åŸç‰ˆ PFC ç³»ç»Ÿã€‚